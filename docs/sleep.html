<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>tinytest</title>
  </head>

  <body>
    <script src="wasm_exec.js"></script>
    <script>
      const go = new Go()
      let wasm
      WebAssembly.instantiateStreaming(fetch('tinytest.wasm'), go.importObject)
        .then((result) => {
          wasm = result.instance
          go.run(wasm)
          document.getElementById('sleepButton').disabled = false
        })
        .catch((err) => {
          console.error(err)
        })

      function sleep() {
        wasm.exports.sleep()
      }
    </script>

    <button onClick="sleep();" id="sleepButton" disabled>Sleep</button>
    <p>Output in dev console</p>
  </body>
</html>
